syntax = "proto3";
package Protocol;
import "google/protobuf/timestamp.proto";
option csharp_namespace = "Google.Protobuf.Protocol";

/*------------------
		Enum
------------------*/

enum PlayerServerState
{
	PLAYER_SERVER_STATE_LOGIN = 0;
	PLAYER_SERVER_STATE_LOBBY = 1;
	PLAYER_SERVER_STATE_GAME = 2;
}

enum GameObjectType
{
	NONE = 0;
	PLAYER = 1;
	MONSTER = 2;
}

enum CreatureState
{
	IDLE = 0;
	MOVE = 1;
	SKILL = 2;
	DEAD = 3;
}

enum SkillType
{
	SKILL_TYPE_NONE = 0;
	SKILL_TYPE_MANUAL = 1;
}

enum ItemType
{
	ITEM_TYPE_NONE = 0;
	ITEM_TYPE_WEAPON = 1;
	ITEM_TYPE_CONSUMABLE = 2;
	ITEM_TYPE_ACCESSORY = 3;
}

enum WeaponType
{
	WEAPON_TYPE_NONE = 0;
	WEAPON_TYPE_SWORD = 1;
	WEAPON_TYPE_WAND = 2;
}

enum ConsumableType
{
	CONSUMABLE_TYPE_NONE = 0;
	CONSUMABLE_TYPE_POTION = 1;
}

enum AccessoryType
{
	ACCESSORY_TYPE_NONE = 0;
	ACCESSORY_TYPE_KEYRING = 1;
}

/*--------------------
		Define
--------------------*/

message Vector
{
	float x = 1;
	float y = 2;
	float z = 3;
}

message TransformInfo
{
	CreatureState state = 1;
	Vector position = 2;
	Vector rotation = 3;
	Vector scale = 4;
}

message SkillInfo
{
	int32 skillId = 1;
}

message ItemInfo
{
	int32 itemDbId = 1;
	int32 templateId = 2;
	int32 count = 3;
	int32 slot = 4;
	bool equipped = 5;
}

message StatInfo
{
	int32 level = 1;
	int32 hp = 2;
	int32 maxHp = 3;
	int32 atkPower = 4;
	float speed = 5;
	int32 totalExp = 6;
}

message LobbyPlayerInfo
{
	int32 playerDbId = 1;
	string name = 2;
	StatInfo stat = 3;
	int32 customizeInfo = 4;
}

message GameObjectInfo
{
	int32 id = 1;
	string name = 2;
	GameObjectType type = 3;
	TransformInfo transform = 4;
	StatInfo stat = 5;
	int32 CustomizeInfo = 6;
}

/*--------------------
		Packet
--------------------*/

enum MsgId
{
	S_CONNECTED_TO_SERVER = 0;
	C_LOGIN = 1;
	S_LOGIN = 2;
	C_CREATE_PLAYER = 3;
	S_CREATE_PLAYER = 4;
	C_ENTER_GAME = 5;
	S_ENTER_GAME = 6;
	S_LEAVE_GAME = 7;
	S_SPAWN = 8;
	S_DESPAWN = 9;
	C_MOVE = 10;
	S_MOVE = 11;
	C_SKILL = 12;
	S_SKILL = 13;
	S_CHANGE_HP = 14;
	S_DIE = 15;
	S_ITEM_LIST = 16;
	S_ADD_ITEM = 17;
	C_EQUIP_ITEM = 18;
	S_EQUIP_ITEM = 19;
	S_CHANGE_STAT = 20;
	C_CHAT = 21;
	S_CHAT = 22;
	S_PING = 23;
	C_PING = 24;
}

message S_ConnectedToServer
{
}

message C_Login
{
	string accountName = 1;
	int32 token = 2;
}

message S_Login
{
	int32 loginOk = 1;
	repeated LobbyPlayerInfo players = 2;
}

message C_CreatePlayer
{
	string name = 1;
	int32 bodyId = 2;
	int32 faceId = 3;
}

message S_CreatePlayer
{
	LobbyPlayerInfo player = 1;
}

message C_EnterGame
{
	string name = 1;
}

message S_EnterGame
{
	GameObjectInfo player = 1;
}

message S_LeaveGame
{
}

message S_Spawn
{
	repeated GameObjectInfo objects = 1;
}

message S_Despawn
{
	repeated int32 objectIds = 1;
}

message C_Move
{
	Vector inputVector = 1;
}

message S_Move
{
	int32 objectId = 1;
	Vector position = 2;
}

message C_Skill
{
	SkillInfo info = 1;
}

message S_Skill
{
	int32 objectId = 1;
	SkillInfo info = 2;
}

message S_ChangeHp
{
	int32 objectId = 1;
	int32 hp = 2;
}

message S_Die
{
	int32 objectId = 1;
	int32 killerId = 2;
}

message S_ItemList
{
	repeated ItemInfo items = 1;
}

message S_AddItem
{
	repeated ItemInfo items = 1;
}

message C_EquipItem
{
	int32 itemDbId = 1;
	bool equipped = 2;
}

message S_EquipItem
{
	int32 itemDbId = 1;
	bool equipped = 2;
}

message S_ChangeStat
{
	StatInfo stat = 1;
}

message C_Chat
{
	string content = 1;
}

message S_Chat
{
	int32 objectId = 1;
	string content = 2;
}

message S_Ping
{
}

message C_Ping
{
}